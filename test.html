<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .animTxt
        {
            width: 200px;
            height: 200px;
        }
        .animTxt>span {
            opacity: 0;
            transition: 0.2s;
        }
        .animTxt>span.visible {
            opacity: 1;
        }
        .speaker {
            font-weight: bold;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>

    <div class="dialogueBox">
        <div class="speaker"></div>
        <div class="animTxt">click</div>
    </div>

    <script>
// animation texte
const storyDiv = document.querySelector(".dialogueBox");
const animDiv = document.querySelector(".animTxt");
const speakerDiv = document.querySelector(".speaker");

let clickCount = 0;

const story = [
    {
        character: "thief",
        text: "text 1"
    },
    {
        character: "you",
        text: "text 2"
    },
    {
        character: "",
        text: "text 3"
    },
    {
        character: "you",
        text: "text 4"
    },
    {
        character: "you",
        text: "text 5"
    }
];

function animText(text) {
    let output = "";
    for (const letter of text) {
        output += `<span>${letter}</span>`;
    }
    animDiv.innerHTML = output;
    [...animDiv.children].forEach((span, index) => {
        setTimeout(() => {
            span.classList.add("visible");
        }, 50 * index);
    });
}

storyDiv.addEventListener("click", () => {
    if (clickCount < 5)
    {
        const dialogue = story[clickCount % story.length];
        speakerDiv.innerHTML = dialogue.character;
        animText(dialogue.text);
        clickCount++;
    }
    else
    {
        document.body.style.background = "red";
    }
});
    </script>
</body>
</html>